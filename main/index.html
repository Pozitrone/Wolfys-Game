<html>

<head>
    <meta lang="en">
    <title>Game in five days</title>
    <script src="main.js"></script>
    <link rel="stylesheet" type="text/css" href="./styles.css">
</head>

<body>
    <div id="main">
        <div class="border">
            <div id="game-menu">
                <div class="menu-button" id="create-world">
                    <span>Create World</span>
                </div>
                <div class="menu-button">
                    <span>Save World</span>
                </div>
                <div class="menu-button">
                    <span>Load World</span>
                </div>
                <hr>
                <div class="menu-info">
                    <span>World:</span><span id="world-name"></span>
                </div>
                <div class="menu-info">
                    <span>Seed:</span><span id="world-seed"></span>
                </div>
                <div class="menu-info">
                    <span>Position x:</span><span id="position-x"></span>
                </div>
                <div class="menu-info">
                    <span>Position y:</span><span id="position-y"></span>
                </div>

            </div>
        </div>
        <div class="canvas-border">
            <div id="canvas-div">
                <canvas id="canvas" width="744" height="504"></canvas>
            </div>
        </div>
        <div class="border">
            <div id="game-windows">
                <div id="status">
                    <div class="stat" id="health-points">
                        <span>HP: </span><span><span id="text-hp-current"></span>/<span id="text-hp-max"></span></span>
                    </div>
                    <div class="stat" id="mana-points">
                        <span>MP: </span><span><span id="text-mp-current"></span>/<span id="text-mp-max"></span></span>
                    </div>
                    <div class="stat" id="experience-points">
                        <span>EXP: </span><span><span id="text-xp-current"></span>/<span id="text-xp-max"></span></span>
                    </div>
                    <div class="stat" id="level">
                        <span>Level: </span><span id="text-level"></span>
                    </div>
                </div>
                <div id="stats">

                </div>
            </div>
        </div>
    </div>

    <div id="console">
        <div id="log"></div>
        <div id="command">
            <input type="text" id="command-line">
            <button id="run-button" value="Run">Run</button>
        </div>
    </div>


    <script>
        var terminal = document.getElementById("log");
        var command = document.getElementById("command-line");
        var runButton = document.getElementById("run-button");

        var createWorldButton = document.getElementById("create-world");
        createWorldButton.onclick = (async () => {
            let worldSeed, worldName = getWorldData();
            console.log(worldName, worldSeed)
            //Worldgen(worldName, worldSeed);
        });

        function getWorldData() {
            log("Please, write the world name:");
            runButton.onclick = (() => {
                if (command.value == null || command.value == "") {
                    log("World name mustn't be empty!");
                }
                else {
                    log("Set name: " + command.value);
                    resetCommand();

                    let name = command.value;
                    let seed = getWorldSeed();
                    return name, seed;
                }
            });
        }

        function getWorldSeed() {
            log("Please, write a seed (number), or leave empty for random seed.");
            runButton.onclick = (() => {
                if (isNaN(Number(command.value))) {
                    log("Seed must be a number")
                }
                else if (command.value == null || command.value == "") {
                    let seed = Math.floor(Math.random() * 10000000)
                    log("Set seed: " + seed);
                    resetCommand();
                    return seed;
                }
                else {
                    log("Set seed: " + command.value);
                    resetCommand();
                    return command.value;
                }
            });
        }

        function log(message) {
            let date = new Date()
            command.value = "";
            terminal.innerHTML += `[${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}] > ${message} <br>`;
        }

        function resetCommand() {
            runButton.onclick = (() => {return null});
        }




    </script>
</body>

</html>